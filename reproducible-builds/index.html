
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Box: building and managing PHARs">
      
      
      
        <link rel="canonical" href="https://box-project.github.io/box/reproducible-builds/">
      
      
        <link rel="prev" href="../symfony/">
      
      
        <link rel="next" href="../phar-signing/">
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Reproducible builds - Box Project</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/announce.css">
    
      <link rel="stylesheet" href="../assets/docs.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="brown" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reproducible-builds" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    Consider supporting Box via
    <span class="twemoji heart">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m47.6 300.4 180.7 168.7c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9l180.7-168.7c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141-45.6-7.6-92 7.3-124.6 39.9l-12 12-12-12c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
    </span>
    <a href="https://github.com/sponsors/theofidry" class="text-light">
        <strong>Github sponsorship</strong>
    </a>

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Box Project" class="md-header__button md-logo" aria-label="Box Project" data-md-component="logo">
      
  <img src="../img/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Box Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reproducible builds
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/box-project/box" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    box-project/box
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../installation/" class="md-tabs__link">
          
  
  Documentation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Box Project" class="md-nav__button md-logo" aria-label="Box Project" data-md-component="logo">
      
  <img src="../img/favicon.png" alt="logo">

    </a>
    Box Project
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/box-project/box" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    box-project/box
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../requirement-checker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requirements checker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimize your PHAR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../code-isolation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHAR code isolation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../symfony/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Symfony support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Reproducible builds
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Reproducible builds
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-reproducible-phar" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a reproducible PHAR
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a reproducible PHAR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php-scoper" class="md-nav__link">
    <span class="md-ellipsis">
      PHP-Scoper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composer" class="md-nav__link">
    <span class="md-ellipsis">
      Composer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Composer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#composer-root-version" class="md-nav__link">
    <span class="md-ellipsis">
      Composer root version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composer-autoload-suffix" class="md-nav__link">
    <span class="md-ellipsis">
      Composer autoload suffix
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#box" class="md-nav__link">
    <span class="md-ellipsis">
      Box
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Box">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phar-alias" class="md-nav__link">
    <span class="md-ellipsis">
      PHAR Alias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-checker" class="md-nav__link">
    <span class="md-ellipsis">
      Requirement Checker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#box-banner" class="md-nav__link">
    <span class="md-ellipsis">
      Box banner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usages" class="md-nav__link">
    <span class="md-ellipsis">
      Usages
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../phar-signing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHAR signing best practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-reproducible-phar" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a reproducible PHAR
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a reproducible PHAR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php-scoper" class="md-nav__link">
    <span class="md-ellipsis">
      PHP-Scoper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composer" class="md-nav__link">
    <span class="md-ellipsis">
      Composer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Composer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#composer-root-version" class="md-nav__link">
    <span class="md-ellipsis">
      Composer root version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composer-autoload-suffix" class="md-nav__link">
    <span class="md-ellipsis">
      Composer autoload suffix
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#box" class="md-nav__link">
    <span class="md-ellipsis">
      Box
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Box">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phar-alias" class="md-nav__link">
    <span class="md-ellipsis">
      PHAR Alias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-checker" class="md-nav__link">
    <span class="md-ellipsis">
      Requirement Checker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#box-banner" class="md-nav__link">
    <span class="md-ellipsis">
      Box banner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usages" class="md-nav__link">
    <span class="md-ellipsis">
      Usages
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="reproducible-builds">Reproducible builds<a class="headerlink" href="#reproducible-builds" title="Permanent link">&para;</a></h1>
<ol>
<li><a href="#creating-a-reproducible-phar">Creating a reproducible PHAR</a></li>
<li><a href="#php-scoper">PHP-Scoper</a></li>
<li><a href="#composer">Composer</a><ol>
<li><a href="#composer-root-version">Composer root version</a></li>
<li><a href="#composer-autoload-suffix">Composer autoload suffix</a></li>
</ol>
</li>
<li><a href="#box">Box</a><ol>
<li><a href="#phar-alias">PHAR alias</a></li>
<li><a href="#requirement-checker">Requirement Checker</a></li>
<li><a href="#box-banner">Box banner</a></li>
<li><a href="#timestamp">Timestamp</a></li>
</ol>
</li>
<li><a href="#usages">Usages</a></li>
</ol>
<p>When building a PHAR, you sometimes want to have reproducible builds, i.e. no matter how many times you build the PHAR,
as long as the source content is identical, then the resulting PHAR should not change.</p>
<p>Whilst this sounds like a good idea and easy at first, it is not the default behaviour. Indeed there is a number of things
that are generated and will make the resulting PHAR different, for example the Composer autoloader classname, or the scoping
prefix if you are using PHP-Scoper.</p>
<p>This documentation aims at walking you through the common elements to adjust in order to achieve reproducible builds. This
is not an exhaustive piece of documentation as it will also depends on your own application too.</p>
<h2 id="creating-a-reproducible-phar">Creating a reproducible PHAR<a class="headerlink" href="#creating-a-reproducible-phar" title="Permanent link">&para;</a></h2>
<h3 id="php-scoper">PHP-Scoper<a class="headerlink" href="#php-scoper" title="Permanent link">&para;</a></h3>
<p>If you are using the <a href="../configuration/#compactors-compactors">PHP-Scoper compactor</a>, you will need to define a fixed prefix as otherwise a random
one is generated.</p>
<p>See the <a href="https://github.com/humbug/php-scoper/blob/main/docs/configuration.md#prefix">PHP-Scoper prefix configuration doc</a>.</p>
<h3 id="composer">Composer<a class="headerlink" href="#composer" title="Permanent link">&para;</a></h3>
<h4 id="composer-root-version">Composer root version<a class="headerlink" href="#composer-root-version" title="Permanent link">&para;</a></h4>
<p>By default, the git commit of the current version is included in some places in the Composer generated files. At the time
of writing, the current git reference can be found in <code>vendor/composer/installed.{json|php}</code> with the path <code>root.reference</code>.</p>
<p>This is not ideal as the content of the PHAR could be identical for two different git commits. In order to get rid of
this problem, you can leverage the <a href="https://getcomposer.org/doc/03-cli.md#composer-root-version"><code>COMPOSER_ROOT_VERSION</code></a>. Either by exporting it or passing
it to Box when compiling it:</p>
<div class="highlight"><pre><span></span><code><span class="nv">COMPOSER_ROOT_VERSION</span><span class="o">=</span><span class="m">1</span>.0.0-dev<span class="w"> </span>box<span class="w"> </span>compile
</code></pre></div>
<h4 id="composer-autoload-suffix">Composer autoload suffix<a class="headerlink" href="#composer-autoload-suffix" title="Permanent link">&para;</a></h4>
<p>By default, Box will dump the Composer autoloader which usually results in a different autoloader classname. There is
exceptions to this, for example Composer tend to try to keep the known suffix if one already exist, but it is an exotic
case that is not recommended to rely on. For this reason you need to configure the <a href="https://getcomposer.org/doc/06-config.md#autoloader-suffix">Composer autoload prefix</a>:</p>
<div class="highlight"><pre><span></span><code>composer<span class="w"> </span>config<span class="w"> </span>autoloader-suffix<span class="w"> </span>AppChecksum
</code></pre></div>
<p>Or configure it directly in your <code>composer.json</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;autoloader-suffix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AppChecksum&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="box">Box<a class="headerlink" href="#box" title="Permanent link">&para;</a></h3>
<h4 id="phar-alias">PHAR Alias<a class="headerlink" href="#phar-alias" title="Permanent link">&para;</a></h4>
<p>By default, Box generates a random PHAR alias so you need to set a fixed value, e.g. <code>my-app-name</code>.</p>
<p>See the <a href="../configuration/#alias-alias">Box alias setting</a>.</p>
<p>The output (<code>string</code>|<code>null</code>) setting specifies the file name and path of the newly built PHAR. If the value of the
setting is not an absolute path, the path will be relative to the base path.</p>
<p>If not provided or set to <code>null</code>, the default value used will based on the <a href="../configuration/#main-main"><code>main</code></a>. For example if the main file
is <code>bin/acme.php</code> or <code>bin/acme</code> then the output will be <code>bin/acme.phar</code>.</p>
<h4 id="requirement-checker">Requirement Checker<a class="headerlink" href="#requirement-checker" title="Permanent link">&para;</a></h4>
<p>By default, Box includes its <a href="../requirement-checker/">Requirement Checker</a>. It will not change from a PHAR to another, so
this step should be skippable. However, the RequirementChecker shipped <em>does</em> change based on the Box version. I.e.
building your PHAR with Box 4.3.8 will result in a different† requirement checker shipped than the one in 4.4.0.</p>
<p>†: By different is meant the checksum is different. The behaviour and code may be the exact same. The most likely
difference will be the namespace.</p>
<p>Note that this may change in the future: https://github.com/box-project/box/issues/1075.</p>
<h4 id="box-banner">Box banner<a class="headerlink" href="#box-banner" title="Permanent link">&para;</a></h4>
<p>By default, Box generates a <a href="../configuration/#banner-banner">banner</a>. This banners includes the Box version so building the same PHAR with two
different Box versions will result in a different PHAR signature.</p>
<h3 id="timestamp">Timestamp<a class="headerlink" href="#timestamp" title="Permanent link">&para;</a></h3>
<p>The files unix timestamp are part of the PHAR signature, hence if they have a different timestamp (which they do as when
you add a PHAR to a file, it is changed to the time at when you added it).</p>
<p>To fix this, you can leverage configure the <a href="../configuration/#forcing-the-timestamp-timestamp">timestamp</a>.</p>
<h2 id="usages">Usages<a class="headerlink" href="#usages" title="Permanent link">&para;</a></h2>
<p>Deterministic builds are a highly desirable property to prevent targeted malware attacks. They also make it easier to
detect if there is any real change. As non-exhaustive examples in the wild: <a href="https://github.com/composer/composer">Composer</a> and <a href="https://github.com/phpstan/phpstan">PHPStan</a>.</p>
<p>Another benefit of such builds is that it makes it easier to know if there was any change. You can know if two PHARs are
identical by using the <code>box diff</code> command, or extract the signature out of the <code>box info:signature</code> command:</p>
<div class="highlight"><pre><span></span><code>box<span class="w"> </span>info:signature<span class="w"> </span>app.phar
</code></pre></div>
<p>And re-use that signature later for comparison. You will loose the ability to do a detailed diff between the two PHARs,
but it is enough to know if the PHARs are identical or not.</p>
<p><br /></p>
<hr />

<p>« <a href="../symfony/#symfony-support">Symfony support</a> • <a href="../phar-signing/#phar-signing-best-practices">PHAR signing best practicies</a> »</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Box is licensed under <a href="https://github.com/box-project/box/blob/master/LICENSE">MIT license</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/box-project" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link", "navigation.tabs", "navigation.top"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>